# ğŸ¡ Truth & Dare Lucky Spin Wheel

A gamified spin-wheel web app where you pick **Truth** or **Dare**, spin the wheel, and get a random challenge â€” from your **Supabase** database or freshly generated by **AI** (Google Gemini).

---

## ğŸš€ Setup

### Step 1 â€” Supabase Database

1. Go to [supabase.com](https://supabase.com) and create a free project.
2. Open the **SQL Editor** and run the full `supabase_seed.sql` file.
   - Creates the `cards` table (with `source` column: `manual` | `ai`)
   - Seeds 20 Truth + 20 Dare starter statements

### Step 2 â€” Configure Frontend Keys

Open `script.js` and replace the placeholders at the top:

```js
const SUPABASE_URL = 'https://YOUR_PROJECT.supabase.co';
const SUPABASE_KEY = 'YOUR_ANON_KEY';
```

Find these in **Project Settings â†’ API**.

### Step 3 â€” Deploy the AI Edge Function *(optional but recommended)*

This keeps your Gemini API key **100% server-side**.

#### Option A: Supabase CLI
```bash
# Install CLI if needed
npm install -g supabase

# Login and link project
supabase login
supabase link --project-ref YOUR_PROJECT_REF

# Deploy the function
supabase functions deploy generate-statements

# Set your Gemini API key as a secret
supabase secrets set GEMINI_API_KEY=your_gemini_key_here
```

Get a free Gemini key at [aistudio.google.com](https://aistudio.google.com).

#### Option B: Supabase Dashboard (no CLI needed)
1. Go to **Edge Functions** in your Supabase dashboard
2. Click **New Function** â†’ name it `generate-statements`
3. Paste the contents of `supabase/functions/generate-statements/index.ts`
4. Go to **Settings â†’ Secrets** â†’ add `GEMINI_API_KEY`

### Step 4 â€” Run the App

```bash
python -m http.server 5500
# Open: http://localhost:5500
```

Or just double-click `index.html` in your browser.

---

## ğŸ“ File Structure

```
Truth & Dare Picker/
â”œâ”€â”€ index.html                              â† App UI (3 screens + AI toggle)
â”œâ”€â”€ style.css                               â† Dark neon UI, AI badge styles
â”œâ”€â”€ script.js                               â† Game logic + AI mode logic
â”œâ”€â”€ supabase_seed.sql                       â† DB table + seed data (with source column)
â”œâ”€â”€ supabase/
â”‚   â””â”€â”€ functions/
â”‚       â””â”€â”€ generate-statements/
â”‚           â””â”€â”€ index.ts                    â† Edge Function (Gemini AI, server-side)
â””â”€â”€ README.md
```

---

## ğŸ® How to Play

1. **Choose mode** â€” tap Truth ğŸ”® or Dare ğŸ”¥
2. **Toggle source** â€” choose Database ğŸ—„ï¸ or AI Mode âœ¨
3. **Spin the wheel** â€” tap the center SPIN button
4. **Get your challenge** â€” statement card appears with confetti ğŸŠ
5. **AI badge** â€” purple âœ¨ AI Generated badge shown on AI-created statements

---

## ğŸ’¡ Features

| Feature | Details |
|---|---|
| ğŸ¡ Spin Physics | 720â€“1080Â° ease-out quartic animation |
| ğŸ”€ DB / AI Toggle | Sliding pill with mode indicator |
| ğŸ¤– AI Generation | Gemini 1.5 Flash, student-safe content |
| ğŸ’¾ Auto-save | AI statements saved to Supabase with `source='ai'` |
| âš¡ Auto-trigger | DB mode auto-generates when < 5 cards exist |
| ğŸ·ï¸ AI Badge | Purple neon badge on AI-generated reveals |
| ğŸŠ Themed Confetti | Purple confetti for AI mode, cyan/red for classic |
| ğŸ“± Responsive | Works on mobile + desktop |
| ğŸ”Œ Offline Fallback | 10 built-in statements per mode (no config needed) |

---

## ğŸ›¡ï¸ Security

- **API keys never exposed** â€” Gemini key lives only as a Supabase secret
- **Student-safe content** â€” Gemini safety filters set to `BLOCK_LOW_AND_ABOVE`
- **RLS enabled** â€” public SELECT only; Edge Function uses service role for INSERT

---

## ğŸ›  Tech Stack

- **Frontend**: Vanilla HTML Â· CSS Â· JavaScript
- **Backend**: [Supabase](https://supabase.com) (PostgreSQL + Edge Functions)
- **AI**: [Google Gemini 1.5 Flash](https://aistudio.google.com)
- **Font**: Orbitron + Inter (Google Fonts)
